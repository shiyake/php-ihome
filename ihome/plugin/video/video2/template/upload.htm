<!--{template header}-->
<style type="text/css">

form {
width: 80%;
padding: 10px 40px 80px 80px;
border: 1px dashed #c9f12b;
-webkit-border-radius: 20px;
position: absolute;
top: 80px;
height: 300px;
}


#upload_submit {
border-top: 1px solid #AD64E0;
background: #0165A6;
color: white;
width: 650px;
height:30px;
text-shadow: black 1px 1px;
text-transform: uppercase;
margin-top: 10px;
}

input {
width: 480px;
padding: 6px;
margin-bottom: 10px;
border-top: 1px solid #AD64E0;
border-left: 0px;
border-right: 0px;
border-bottom: 0px;
-webkit-transition-property: -webkit-box-shadow, background;
-webkit-transition-duration: 0.25s;
-webkit-box-shadow: 0px 0px 2px #000;
}

textarea {
border: 1px solid #DDD;
overflow: auto;
width:640px;
-webkit-transition-property: -webkit-box-shadow, background;
-webkit-transition-duration: 0.25s;
-webkit-box-shadow: 0px 0px 2px #000;
}

</style>
<form id="upload_video_form" enctype="multipart/form-data" name="upload_video_form" method="post" action="plugin.php?pluginid=video&ac=upload">
文件：
<br />
<input type="file" id="uploadvideo" name="uploadvideo" onchange="checkFileExt(this)" ><span id="uploadfilelimit" style="padding:0 0 0 10px">最大支持上传100M的FLV</span>
<br />
标题：
<br />
<input type="text" id="title_video" name="title" value="" onblur="checkvideotitle()" >
<span id="title_video_check"></span>
<br />
简介：
<br />
<textarea id="desc_video" name="desc" rows="5" onblur="checkvideodesc()" ></textarea>
<div id="desc_video_check"></div>
<br />

<input type="submit" id="upload_submit" name="upload_submit" value="保存">
<input type="hidden" id="uploadflv" name="uploadflv" value="ture">
<input type="hidden" name="formhash" value="<!--{eval echo formhash();}-->" /></form>
<script type="text/javascript">
//应该用jQuery做好点,但是先这样吧,得用2个jQuery插件!

var lastvideotitle = lastvideodesc = '';

function checkFileExt(filename) {
	if(!filename.value) return;
	if (filename.value.length > 5) {
		var startx=filename.value.lastIndexOf(".");
		var shutdown=filename.value.length;
		var fileext=filename.value.substring(startx,shutdown);
		if (fileext == ".flv") return;
	}
	alert('对不起，请选择.flv类型的文件！');
	filename.value = "";
}
	
function checkvideotitle() {
	var videotitle = $('title_video').value;
	if(videotitle == lastvideotitle){
		return;
	}else{
		lastvideotitle = videotitle;
	}
	var vtc = $('title_video_check');
	var vtlen = videotitle.replace(/[^\x00-\xff]/g, "**").length;
	if(vtlen < 4 || vtlen > 40){
		warning(vtc, vtlen < 4 ? '标题小于2个汉字' : '标题超过 20 个汉字');
		return;
	}
	else {
		vtc.style.display = '';
		vtc.innerHTML = '<img src="image/check_right.gif" width="13" height="13">';
		vtc.className = "warning";
	}
}
	
function checkvideodesc() {
	var videodesc = $('desc_video').value;
	if(videodesc == lastvideodesc){
		return;
	}else{
		lastvideodesc = videodesc;
	}
	var vdc = $('desc_video_check');
	var vdlen = videodesc.replace(/[^\x00-\xff]/g, "**").length;
	if(vdlen < 10 || vdlen > 400){
		warning(vdc, vdlen < 10 ? '描述小于5个汉字' : '标题超过 200 个汉字');
		return;
	}
	else {
		vdc.style.display = '';
		vdc.innerHTML = '<img src="image/check_right.gif" width="13" height="13">';
		vdc.className = "warning";
	}
}
	
function warning(obj, msg) {
	obj.style.display = '';
	obj.innerHTML = '<img src="image/check_error.gif" width="13" height="13"> &nbsp; ' + msg;
	obj.className = "warning";
}
</script>
<!--{template footer}-->
